{% extends 'portal/base.html' %}

{% load static %}

{% load humanize %}

{% block title %} Últimos movimientos {% endblock title %}

{% block content %}


<div class="container">
    <div class="filters" align="center">
        Filtrar por
        <a href="#" class="btn btn-outline-secondary btn-sm">>Tabla<</a>
        <a href="{% url 'accounts:last_ops_by_day' %}" class="btn btn-secondary btn-sm">Día</a>
        <a href="{% url 'accounts:last_ops_by_account' %}" class="btn btn-secondary btn-sm">Cuenta</a>
    </div>

<br>

    <div class="pagination">
        <div class="col-md-12" align="right">
            <span class="step-links">
                {% for item in page_obj.paginator.page_range %}
                    {% if item < page_obj.number %}
                        <a href="?page={{ item }}" class="btn btn-secondary btn-sm">{{ item }}</a>
                    {% elif item == page_obj.number %}
                        <a href="#" class="btn btn-outline-secondary btn-sm">{{ item }}</a>
                    {% elif item > page_obj.number %}
                        <a href="?page={{ item }}" class="btn btn-secondary btn-sm">{{ item }}</a>
                    {% endif %}
                {% endfor %}
            </span>
        </div>
    </div>
</div>

<br>

<div class="table-responsive">
    <table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col"></th>
            <th scope="col">Fecha</th>
            <th scope="col">Importe</th>
            <th scope="col">Entidad</th>
            <th scope="col">Cuenta</th>
            <th scope="col" class="d-none d-md-block">Categoría</th>
        </tr>
    </thead>
    <tbody>
    {% for item in item_list %}
        <tr>
            <td class="d-none d-md-block"><a href="{% url 'accounts:update_op' item.pk %}" class="rowlink"><img src={% static '/images/edit-button.png' %} height=15px></td>
            <td>{{ item.date | date:"Y-m-d H:m" }}</td>
            <td class="currency" align="right">{{ item.amount | floatformat:2 | intcomma }}</td>
            <td>{{ item.entity }}</td>
            <td>{% if item.account.bank == 'bancolombia' %}<img src="{% static 'images/bancolombia-logo.png' %}" height=17px>{% endif %} {{ item.account.owner }}</td>
            <td class="d-none d-md-block">{% if item.category != ''%}{{ item.category }}{% else %}-{% endif %}</td>
        </tr>
    {% endfor %}
    </tbody>
    </table>
</div>


{% endblock %}